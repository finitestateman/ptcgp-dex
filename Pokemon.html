<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <title>포켓몬 입력폼</title>
</head>

<body>
    <h1>포켓몬 정보 입력</h1>
    <form id="pokemonForm">
        <div>
            <label for="dexNo">Dex No:</label>
            <input type="number" id="dexNo" name="dexNo" required>
        </div>
        <div>
            <label for="identifier">Identifier:</label>
            <input type="text" id="identifier" name="identifier" required>
        </div>
        <div>
            <label for="name">Name:</label>
            <input type="text" id="name" name="name" required>
        </div>
        <div>
            <label for="species">Species:</label>
            <input type="text" id="species" name="species" required>
        </div>
        <div>
            <label for="type1">Type1:</label>
            <select id="type1" name="type1" required>
                <option value="">선택하세요</option>
                <option value="grass">grass</option>
                <option value="fire">fire</option>
                <option value="water">water</option>
                <option value="lightning">lightning</option>
                <option value="psychic">psychic</option>
                <option value="fighting">fighting</option>
                <option value="darkness">darkness</option>
                <option value="metal">metal</option>
                <option value="dragon">dragon</option>
                <option value="colorless">colorless</option>
            </select>
        </div>
        <div>
            <label for="type2">Type2:</label>
            <select id="type2" name="type2">
                <option value="">선택하세요</option>
                <option value="grass">grass</option>
                <option value="fire">fire</option>
                <option value="water">water</option>
                <option value="lightning">lightning</option>
                <option value="psychic">psychic</option>
                <option value="fighting">fighting</option>
                <option value="darkness">darkness</option>
                <option value="metal">metal</option>
                <option value="dragon">dragon</option>
                <option value="colorless">colorless</option>
            </select>
        </div>
        <div>
            <label for="height">Height:</label>
            <input type="number" id="height" name="height" required>
        </div>
        <div>
            <label for="weight">Weight:</label>
            <input type="number" id="weight" name="weight" required>
        </div>
        <div>
            <label for="introducedGen">Introduced Gen:</label>
            <input type="number" id="introducedGen" name="introducedGen" required>
        </div>
        <div>
            <label for="descriptionContent">Description Content:</label>
            <textarea id="descriptionContent" name="descriptionContent" required></textarea>
        </div>
        <button type="submit">전송</button>
    </form>

    <script>
        document.getElementById('pokemonForm').addEventListener('submit', function (event) {
            event.preventDefault(); // 폼 기본 제출 이벤트 중지

            const dexNo = Number(document.getElementById('dexNo').value);
            const identifier = document.getElementById('identifier').value;
            const name = document.getElementById('name').value;
            const species = document.getElementById('species').value + ' Pokémon';
            const type1 = document.getElementById('type1').value;
            const type2 = document.getElementById('type2').value;
            const height = Number(document.getElementById('height').value);
            const weight = Number(document.getElementById('weight').value);
            const introducedGen = Number(document.getElementById('introducedGen').value);
            const descriptionContent = document.getElementById('descriptionContent').value;

            const payload = {
                dexNo: dexNo,
                identifier: identifier,
                name: name,
                species: species,
                type1: type1,
                type2: type2,
                height: height,
                weight: weight,
                introducedGen: introducedGen,
                description: {
                    content: descriptionContent
                }
            };

            fetch('http://localhost:3000/pokemons', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(payload)
            })
                .then(response => {
                    if (!response.ok) {
                        throw new Error('서버 응답이 정상적이지 않습니다.');
                    }
                    return response.json();
                })
                .then(data => {
                    console.log('서버 응답:', data);
                    alert('데이터가 성공적으로 전송되었습니다.');
                })
                .catch(error => {
                    console.error('전송 에러:', error);
                    alert('데이터 전송 중 오류가 발생했습니다.');
                });
        });
    </script>
</body>

</html>